#!/bin/sh

FILE_PATH="$1"
APPLY_EXTENSION="$2"

FILE_DIR="$(dirname "$FILE_PATH")"
FILE_NAME="$(basename "$FILE_PATH")"

if [ "$APPLY_EXTENSION" == 'ext' ]
then
    EXTENSION="$(sed -E 's/.*(\..*)$/\1/' <<< "$FILE_NAME")" 
    sed -E 's/(.*)(\..*)$/\1/' <<< "$FILE_NAME" |while read -r NEW_FILE_NAME; do mv "$FILE_PATH" "$FILE_DIR/$(slugify "$NEW_FILE_NAME")$EXTENSION"; done
else
    sed -E 's/(.*)$/\1/' <<< "$FILE_NAME" |while read -r NEW_FILE_NAME; do mv "$FILE_PATH" "$FILE_DIR/$(slugify "$NEW_FILE_NAME")"; done
fi
